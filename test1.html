<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sirdata CMP Example</title>
    <!-- Add the Sirdata CMP scripts -->
    <script data-cfasync="false" src="https://cache.consentframework.com/js/pa/43928/c/OMJpR/stub" referrerpolicy="unsafe-url" charset="utf-8" type="text/javascript"></script>
    <script data-cfasync="false" src="https://choices.consentframework.com/js/pa/43928/c/OMJpR/cmp" referrerpolicy="unsafe-url" charset="utf-8" async></script>
</head>
<body>
    <!-- Button to log message and reopen CMP -->
    <button id="cmpButton" onclick="handleButtonClick()">Open CMP</button>

    <script>
        // Function to handle button click
        function handleButtonClick() {
            console.log('1');
            // Use __tcfapi to display the CMP UI
            window.__tcfapi('displayConsentUi', 2, function(success) {
                if (!success) {
                    console.error('Failed to display CMP UI');
                }
            });
        }

        // Log TCData and TCString when the page loads
        window.__tcfapi("getTCData", 2, function(tcData, success) {
            if (success) {
                console.log("TCData:", tcData);
                console.log("TCString:", tcData.tcString);
            }
        });

        // Add event listener to log TCString when user changes privacy settings
        window.__tcfapi("addEventListener", 2, function(tcData, success) {
            if (success) {
                console.log("Updated TCString:", tcData.tcString);
            }
        });
    </script>
</body>
</html>

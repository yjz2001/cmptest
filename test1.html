<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sirdata CMP 示例</title>
    <!-- 添加 Sirdata CMP 安装标签 -->
    <script data-cfasync="false" src="https://cache.consentframework.com/js/pa/43928/c/OMJpR/stub" referrerpolicy="unsafe-url" charset="utf-8" type="text/javascript"></script>
    <script data-cfasync="false" src="https://choices.consentframework.com/js/pa/43928/c/OMJpR/cmp" referrerpolicy="unsafe-url" async></script>
    <script>
        // 等待 CMP 加载
        window.__tcfapi('ping', 2, function(pingReturn, success) {
            if (success) {
                console.log('CMP 已加载:', pingReturn);
            }
        });

        // 添加事件监听器
        window.__tcfapi('addEventListener', 2, function(tcData, success) {
            if (success) {
                console.log('TC String:', tcData.tcString);
                console.log('其他 consent 状态信号:', tcData);
            }
        });
    </script>
</head>
<body>
    <h1>欢迎使用 Sirdata CMP 示例</h1>
    <!-- 用户可操作的按钮 -->
    <button id="promptConsentUI" class="btn">我的同意选择</button>
    <script>
        // 显示 CMP UI 按钮事件
        document.getElementById('promptConsentUI').onclick = function() {
            console.log('1');
            window.__tcfapi('displayUI', 2, function(tcData, success) {
                if (success) {
                    console.log('用户操作后的 TC String:', tcData.tcString);
                } else {
                    console.error('显示 CMP UI 时发生错误');
                }
            });
        };
    </script>
</body>
</html>
